{% extends "ports/base.html" %}
{% block title %}Port list{% endblock %}
{% load humanize %}
{% block body_block %}

<br />

<form action="{% url 'ports:list' %}" method="GET">
  <div class="form-row">
    <div class="form-group col-md-3">
      <label for="port">Port</label>
		<input type="text" class="form-control" name="port" placeholder="category/port" value="{{form_port}}">
    </div>
    <div class="form-group col-md-3">
      <label for="maintainer">Maintainer</label>
		<input type="text" class="form-control" name="maintainer" placeholder="maintainer" value="{{form_maintainer}}">
    </div>
  </div>
  <button type="submit" class="btn btn-primary btn-sm">Filter</button>
  <small class="text-muted">
    Regular expressions are permitted
  </small>
</form>

<br />

{% if port_list %}
	<h3>Port List</h3>

<div class="table-responsive">
<table class="table table-sm table-striped">
  <thead>
    <tr>
      <th scope="col" class="text-nowrap">port</th>
      <th scope="col" class="text-nowrap">maintainer</th>
      <th scope="col" class="text-nowrap">fallouts</th>
    </tr>
  </thead>
  <tbody>
	{% for port in port_list %}
    <tr>
      <td class="text-nowrap"><small><a href="{% url 'ports:detail' port.id  %}">{{ port.origin }}</a></small></td>
      <td class="text-nowrap"><small>{{ port.maintainer }}</small></td>
      <td class="text-nowrap"><small>{{ port.fcount|intcomma }}</small></td>
    </tr>
	{% endfor %}
  </tbody>
</table>
</div>

{% if is_paginated %}
    <ul class="pagination">
      {% if page_obj.has_previous %}
        <li class="page-item">
          <a href="?page={{ page_obj.previous_page_number }}" class="page-link">&laquo;</a>
        </li>
        <li>
          <a class="page-link" href="?page={{ page_obj.previous_page_number }}">{{ page_obj.previous_page_number }}</a>
        </li>
      {% else %}
        <li class="page-item disabled">
          <span class="page-link">&laquo;</span>
        </li>
      {% endif %}

      <li class="page-item active">
        <span class="page-link">{{ page_obj.number }}</span>
      </li>

      {% if page_obj.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.next_page_number }}">{{ page_obj.next_page_number }}</a>
        </li>
        <li class="page-item ">
          <a class="page-link" href="?page={{ page_obj.next_page_number }}">&raquo</a>
        </li>
      {% else %}
        <li class="page-item disabled">
          <span class="page-link">&raquo</span>
        </li>
      {% endif %}
    </ul>
{% endif %}

{% else %}
  <div class="row">
    <div class="col-md-12">
      <p>No port found for this query.</p>
    </div>
  </div>
{% endif %}

  <div class="row">
    <div class="col-md-12">
      <p>Filtering entries from the last 30 days.</p>
    </div>
  </div>


{% endblock %}
